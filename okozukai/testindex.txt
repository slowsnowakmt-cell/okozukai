<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<title>ã—ã£ã‹ã‚Šï¼ãŠã“ã¥ã‹ã„ãƒ©ã‚¤ãƒ•</title>

<style>
body {
  margin: 0;
  font-family: "Rounded Mplus 1c", "Yu Gothic", sans-serif;
  background: url('bg/default.jpg') no-repeat center center fixed;
  background-size: cover;
  color: #333;
  text-align: center;
  transition: background-image 1s ease-in-out;
}
#title {
  height: 100vh;
  background: linear-gradient(to bottom, #87cefa, #b3e5ff);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: white;
}
#title h1 {
  font-size: 2.4em;
  animation: floatTitle 4s ease-in-out infinite;
  text-shadow: 0 0 8px rgba(0,0,0,0.2);
}
@keyframes floatTitle {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
#startBtn {
  background: white;
  border: none;
  border-radius: 30px;
  padding: 15px 40px;
  margin-top: 40px;
  font-size: 1.2em;
  color: #3498db;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  cursor: pointer;
  animation: floatBtn 3.5s ease-in-out infinite;
}
@keyframes floatBtn {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(8px); }
}
#game {
  display: none;
  max-width: 480px;
  margin: 0 auto;
  margin-top: 20px;
  background: rgba(255,255,255,0.85);
  border-radius: 15px;
  padding: 20px;
}
button {
  background-color: #ffb84c;
  border: none;
  border-radius: 12px;
  color: white;
  padding: 10px 20px;
  margin: 10px;
  cursor: pointer;
  font-size: 16px;
}
button:hover { background-color: #ffa733; }
.stats {
  background: rgba(255,255,255,0.6);
  border-radius: 12px;
  padding: 10px;
  margin-top: 15px;
}
</style>
</head>
<body>

<div id="title">
  <h1>ã—ã£ã‹ã‚Šï¼ãŠã“ã¥ã‹ã„ãƒ©ã‚¤ãƒ•</h1>
  <button id="startBtn">ã¯ã˜ã‚ã‚‹ï¼</button>
</div>

<div id="game">
  <p id="text"></p>
  <div id="choices"></div>
  <div class="stats" id="stats"></div>
</div>

<audio id="bgm-main" src="bgm/main.mp3" loop></audio>
<audio id="bgm-event" src="bgm/event.mp3" loop></audio>
<audio id="bgm-luxury" src="bgm/luxury.mp3" loop></audio>
<audio id="se-click" src="se/click.mp3"></audio>
<audio id="se-buy" src="se/buy.mp3"></audio>
<audio id="se-success" src="se/success.mp3"></audio>
<audio id="se-end" src="se/end.mp3"></audio>

<script>
let month = 4;
let money = 0;
let happy = 0;
let specialGift = false;
let switchBought = false;

const months = ["4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ","1æœˆ","2æœˆ","3æœˆ"];

document.getElementById("startBtn").onclick = () => {
  playSe("click");
  document.getElementById("title").style.display = "none";
  document.getElementById("game").style.display = "block";
  playBgm("main");
  startGame();
};

function playBgm(type){
  ["main","event","luxury"].forEach(id=>{
    const a=document.getElementById("bgm-"+id);
    a.pause(); a.currentTime=0;
  });
  const bg=document.getElementById("bgm-"+type);
  if(bg){ bg.volume=0.5; bg.play().catch(()=>{}); }
}
function playSe(id){
  const s=document.getElementById("se-"+id);
  if(s){ s.currentTime=0; s.play().catch(()=>{}); }
}

function setSeasonBackground(month, eventType="normal"){
  let file = `bg/${month}${eventType==="event"?"_event":""}.jpg`;
  document.body.style.backgroundImage = `url('${file}')`;
}

function show(text, choices=[]){
  const t=document.getElementById("text");
  const c=document.getElementById("choices");
  t.innerHTML=text.replace(/\n/g,"<br>");
  c.innerHTML="";
  choices.forEach(opt=>{
    const b=document.createElement("button");
    b.textContent=opt.text;
    b.onclick=()=>{ playSe("click"); opt.action(); };
    c.appendChild(b);
  });
  document.getElementById("stats").innerHTML=`ğŸ“…${months[month-4]}<br>ğŸ’°${money}å††<br>ğŸ˜Šå¹¸ç¦åº¦:${happy}`;
}

function startGame(){
  show("ğŸŒ¸æ–°ã—ã„1å¹´ãŒã¯ã˜ã¾ã‚Šã¾ã™ï¼\nè¨ˆç”»çš„ã«ãŠã“ã¥ã‹ã„ã‚’ä½¿ã£ã¦ã—ã‚ã‚ã›ãª1å¹´ã‚’ã‚ã–ãã†ï¼",[{
    text:"ã‚¹ã‚¿ãƒ¼ãƒˆï¼", action:nextMonth
  }]);
}

function nextMonth(){
  if(month>15){endGame();return;}
  setSeasonBackground(month);
  show(`ğŸŒ™ ${months[month-4]}ã«ãªã£ãŸï¼`,[{text:"æœˆåˆã‚¤ãƒ™ãƒ³ãƒˆã¸",action:randomEvent}]);
}

function randomEvent(){
  const r=Math.random();
  let msg="";
  if(r<0.2){msg="ğŸ‘¨â€ğŸ¦±ãŠã˜ã•ã‚“ãŒè‡¨æ™‚ãŠã“ã¥ã‹ã„ã‚’ãã‚ŒãŸï¼(+10000å††,å¹¸ç¦åº¦+10)";money+=10000;happy+=10;}
  else if(r<0.5){msg="ğŸ‘®ãŠè²¡å¸ƒã‚’å±Šã‘ã¦500å††ã‚‚ã‚‰ã£ãŸï¼(+500å††,å¹¸ç¦åº¦+5)";money+=500;happy+=5;}
  else if(r<0.8){msg="ğŸ‘©ãƒãƒã®ãŠæ‰‹ä¼ã„ã‚’ãŒã‚“ã°ã£ã¦1000å††ï¼(+1000å††,å¹¸ç¦åº¦+7)";money+=1000;happy+=7;}
  else {msg="ç‰¹ã«ä½•ã‚‚èµ·ã“ã‚‰ãªã‹ã£ãŸã€‚";}
  show(msg,[{text:"ãŠå°é£ã„ã¸",action:monthlyAllowance}]);
}

function monthlyAllowance(){
  money+=3000;
  show("ğŸ’°ä»Šæœˆã®ãŠã“ã¥ã‹ã„3000å††ã‚’ã‚‚ã‚‰ã£ãŸï¼",[{text:"ã©ã“ã¸è¡Œãï¼Ÿ",action:chooseShop}]);
}

function chooseShop(){
  show("ğŸ™ï¸ã©ã“ã«è¡Œãï¼Ÿ",[ 
    {text:"ãŠã‚‚ã¡ã‚ƒå±‹ã¸",action:toyShop},
    {text:"ãƒ‡ãƒ‘ãƒ¼ãƒˆã¸",action:departmentStore},
    {text:"ã‚„ã‚ã‚‹",action:monthEvent}
  ]);
}

function toyShop(){
  playBgm("event");
  show("ğŸ§¸ãŠã‚‚ã¡ã‚ƒå±‹ã«æ¥ãŸï¼",[ 
    {text:"ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¹ã‚¤ãƒƒãƒ(18000å††)",action:()=>buyItem("switch",18000,30)},
    {text:"ã‚²ãƒ¼ãƒ ã‚½ãƒ•ãƒˆ(2000å††)",action:()=>buyItem("game",2000,8)},
    {text:"UFOã‚­ãƒ£ãƒƒãƒãƒ£ãƒ¼ã§éŠã¶(500å††)",action:()=>buyItem("ufo",500,3)},
    {text:"ã‚„ã‚ã‚‹",action:chooseShop}
  ]);
}

function departmentStore(){
  playBgm("event");
  show("ğŸ›ï¸ãƒ‡ãƒ‘ãƒ¼ãƒˆã«æ¥ãŸï¼",[ 
    {text:"ã‹ã‚ã„ã„æœ(5000å††)",action:()=>buyItem("clothes",5000,10)},
    {text:"ãƒ—ãƒªã‚­ãƒ¥ã‚¢ã®ãŠã‚‚ã¡ã‚ƒ(2000å††)",action:()=>buyItem("toy",2000,5)},
    {text:"ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ(3000å††)",action:()=>buyItem("gift",3000,8)},
    {text:"ãŠè“å­ã®è©°ã‚åˆã‚ã›(1000å††)",action:()=>buyItem("sweets",1000,4)},
    {text:"ã‚„ã‚ã‚‹",action:chooseShop}
  ]);
}

function buyItem(name, price, happyPlus){
  if(money>=price){
    money-=price;
    happy+=happyPlus;
    playSe("buy");
    if(name==="switch")switchBought=true;
    show(`ğŸ›’${price}å††ã§${name==="switch"?"ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼ã‚¹ã‚¤ãƒƒãƒ":"ã‚¢ã‚¤ãƒ†ãƒ "}ã‚’è²·ã£ãŸï¼å¹¸ç¦åº¦+${happyPlus}`,[{text:"æˆ»ã‚‹",action:chooseShop}]);
  }else{
    playSe("end");
    show("ğŸ’¦ãŠé‡‘ãŒè¶³ã‚Šãªã„â€¦",[ {text:"æˆ»ã‚‹",action:chooseShop} ]);
  }
}

function monthEvent(){
  let msg="",eventType="normal";
  switch(month){
    case 4:
      money+=2000;
      msg="ğŸŒ¸å…¥å­¦ç¥ã„ã§2000å††ã‚‚ã‚‰ã£ãŸï¼";
      eventType="event";
      break;
    case 5:
      eventType="event";
      show("ğŸ’æ¯ã®æ—¥ã§ã™ã€‚ã‚«ãƒ¼ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’è²·ã„ã¾ã™ã‹ï¼Ÿ",[{
        text:"è²·ã†ï¼ˆ2000å††ï¼‰",action:()=>{
          if(money>=2000){money-=2000;happy+=10;playSe("buy");
            show("ğŸ’ãŠæ¯ã•ã‚“ãŒã¨ã¦ã‚‚å–œã‚“ã§ãã‚ŒãŸï¼å¹¸ç¦åº¦+10",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }else{
            playSe("end");
            show("ğŸ’¦ãŠé‡‘ãŒè¶³ã‚Šãªãã¦è²·ãˆãªã‹ã£ãŸâ€¦",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }
        }},
        {text:"è²·ã‚ãªã„",action:()=>{
          show("ğŸ¤”ã¡ã‚‡ã£ã¨ç”³ã—è¨³ãªã„æ°—æŒã¡ã«ãªã£ãŸã€‚",[{
            text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
          }]);
        }}
      ]);
      return;
    case 6: msg="â˜”é›¨ã®æ—¥ãŒå¤šãã¦ã¡ã‚‡ã£ã¨æ†‚ã†ã¤ã€‚";happy+=1;break;
    case 7:
      eventType="event";
      show("ğŸ¦å¤ä¼‘ã¿ï¼ã‚¢ã‚¤ã‚¹ã‚’è²·ã£ã¦é£Ÿã¹ã¾ã™ã‹ï¼Ÿ",[
        {text:"é£Ÿã¹ã‚‹ï¼ˆ300å††ï¼‰",action:()=>{
          if(money>=300){money-=300;happy+=6;playSe("buy");
            show("ğŸ§ã‚¢ã‚¤ã‚¹ãŠã„ã—ã„ï¼å¹¸ç¦åº¦+6",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }else{
            playSe("end");
            show("ğŸ’¦ãŠé‡‘ãŒè¶³ã‚Šãªãã¦è²·ãˆãªã‹ã£ãŸâ€¦",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }
        }},
        {text:"ã‚„ã‚ã‚‹",action:()=>{
          show("â˜€ï¸ç¯€ç´„ã—ã¦æˆ‘æ…¢ã—ãŸã€‚",[{
            text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
          }]);
        }}
      ]);
      return;
    case 8:money+=1000;msg="ğŸ ç¥–çˆ¶ã®å®¶ã§ãŠã“ã¥ã‹ã„1000å††ï¼";eventType="event";break;
    case 9:msg="ğŸç§‹ã®æ°—é…ã‚’æ„Ÿã˜ã‚‹ã€‚ã®ã‚“ã³ã‚Šéã”ã—ãŸã€‚å¹¸ç¦åº¦+2";happy+=2;break;
    case 10:happy+=5;msg="ğŸƒãƒãƒ­ã‚¦ã‚£ãƒ³ã§ãŠè“å­ãƒ‘ãƒ¼ãƒ†ã‚£ï¼å¹¸ç¦åº¦+5";eventType="event";break;
    case 11:msg="ğŸ‚ç´…è‘‰ãŒãã‚Œã„ãªå­£ç¯€ã€‚å¹¸ç¦åº¦+2";happy+=2;break;
    case 12:
      eventType="event";
      show("ğŸ„ã‚¯ãƒªã‚¹ãƒã‚¹ï¼ãšã£ã¨æ¬²ã—ã‹ã£ãŸã‚‚ã®ã‚’è²·ã„ã¾ã™ã‹ï¼Ÿ",[{
        text:"è²·ã†ï¼ˆ20000å††ï¼‰",action:()=>{
          if(money>=20000){money-=20000;happy+=50;specialGift=true;playBgm("luxury");
            show("ğŸå¤¢ãŒã‹ãªã£ãŸï¼å¹¸ç¦åº¦+50",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }else{
            playSe("end");
            show("ğŸ’¦ãŠé‡‘ãŒè¶³ã‚Šãªãã¦è²·ãˆãªã‹ã£ãŸâ€¦",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }
        }},
        {text:"ã‚„ã‚ã‚‹",action:()=>{
          show("ğŸ…ä»Šå¹´ã¯ãŒã¾ã‚“ã—ã¦æ¥å¹´ã«æœŸå¾…ï¼",[{
            text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
          }]);
        }}
      ]);
      return;
    case 1:money+=10000;msg="ğŸãŠæ­£æœˆï¼ãŠå¹´ç‰10000å††ï¼";eventType="event";break;
    case 2:
      eventType="event";
      show("ğŸ«ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ã§ã™ã€‚ãƒãƒ§ã‚³ã‚’è²·ã£ã¦å‹é”ã¨é£Ÿã¹ã¾ã™ã‹ï¼Ÿ",[
        {text:"è²·ã†ï¼ˆ1000å††ï¼‰",action:()=>{
          if(money>=1000){money-=1000;happy+=10;playSe("buy");
            show("ğŸ«å‹é”ã¨ãƒãƒ§ã‚³ã‚’é£Ÿã¹ã¦æ¥½ã—ã‹ã£ãŸï¼å¹¸ç¦åº¦+10",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }else{
            playSe("end");
            show("ğŸ’¦ãŠé‡‘ãŒè¶³ã‚Šãªãã¦è²·ãˆãªã‹ã£ãŸâ€¦",[{
              text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
            }]);
          }
        }},
        {text:"è²·ã‚ãªã„",action:()=>{
          show("ğŸ€ãŠé‡‘ã‚’ç¯€ç´„ã—ãŸã€‚",[{
            text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}
          }]);
        }}
      ]);
      return;
    case 3:msg="ğŸŒ¸å’æ¥­ã®å­£ç¯€ã€‚æ¥å¹´ã‚‚ãŒã‚“ã°ã‚ã†ï¼å¹¸ç¦åº¦+5";happy+=5;break;
  }
  setSeasonBackground(month,eventType);
  show(msg,[{text:"æ¬¡ã®æœˆã¸",action:()=>{month++;playBgm("main");nextMonth();}}]);
}

function endGame(){
  playBgm("luxury");
  playSe("end");
  let end="";
  if(specialGift)end="ğŸå¤¢ãŒã‹ãªã£ãŸç‰¹åˆ¥ãªä¸€å¹´ï¼";
  else if(switchBought)end="ğŸ®ã‚¹ã‚¤ãƒƒãƒãƒ©ã‚¤ãƒ•ã‚¨ãƒ³ãƒ‰ï¼";
  else if(happy>=150 && money>=30000)end="ğŸŒŸæœ€é«˜ã®ä¸€å¹´ï¼";
  else if(happy>=150)end="ğŸ˜Šã—ã‚ã‚ã›ã„ã£ã±ã„ã‚¨ãƒ³ãƒ‰ï¼";
  else if(money>=30000)end="ğŸ’°ã—ã£ã‹ã‚Šè²¯ã‚ãŸã‚¨ãƒ³ãƒ‰ï¼";
  else end="ğŸŒ™ãµã¤ã†ã®ä¸€å¹´ã ã£ãŸã€‚";
  show(`ğŸã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°<br>${end}<br><br>ğŸ’°${money}å††<br>ğŸ˜Šå¹¸ç¦åº¦:${happy}`,[{text:"ã‚‚ã†ä¸€åº¦ã‚ãã¶",action:()=>location.reload()}]);
}
</script>
</body>
</html>
